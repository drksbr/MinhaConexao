import{j as e,B as a,e as u,S as b,T as r,G as R}from"./index-CtE1KQDU.js";import{u as S,G as s}from"./useQuery-DAhalTyd.js";import{u as w,S as y}from"./useShare-C1K_nhpg.js";import{F as o,H as I,I as d}from"./createLucideIcon-BNJws9G5.js";import{R as T}from"./refresh-ccw-BDIq8fHF.js";const z=()=>{const{ref:l,share:h}=w(),x=async()=>{const n=await fetch("/requestinfo");if(!n.ok)throw new Error("Falha na resposta da rede");const i=await n.json();return{XRealIP:i.XRealIP,XForwardedSourcePort:i.XForwardedSourcePort,Timestamp:new Date(i.Timestamp)}},{data:t,isLoading:c,isError:g,error:m,refetch:j,isFetching:p}=S({queryKey:["requestInfo"],queryFn:x,refetchOnWindowFocus:!1,staleTime:1e3*60*5}),f=()=>{j()};return e.jsxs(a,{bg:u("white","gray.700"),borderRadius:"md",p:5,boxShadow:"md",position:"relative",_hover:{boxShadow:"xl",transform:"scale(1.02)"},transition:"0.3s",maxW:"full",minH:"400px",ref:l,children:[e.jsxs(o,{justifyContent:"space-between",alignItems:"center",mb:5,children:[e.jsx(I,{size:"lg",children:"Requisição HTTP"}),e.jsxs(a,{alignContent:"end",children:[e.jsx(d,{"aria-label":"Share",icon:e.jsx(y,{size:18}),onClick:h,size:"sm",variant:"ghost"}),e.jsx(d,{"aria-label":"Refresh",icon:e.jsx(T,{size:18}),onClick:f,size:"sm",variant:"ghost",isLoading:p})]})]}),c?e.jsx(o,{justifyContent:"center",alignItems:"center",height:"70%",children:e.jsx(b,{size:"xl"})}):g?e.jsxs(r,{children:["Erro ao obter as informações: ",m.message]}):t?e.jsx(a,{children:e.jsxs(R,{templateColumns:"auto 1fr",gap:3,children:[e.jsx(s,{borderRight:"1px dashed gray",pr:4,children:e.jsx(r,{fontWeight:"bold",textAlign:"right",children:"IP"})}),e.jsx(s,{pl:2,children:e.jsx(r,{children:t.XRealIP})}),e.jsx(s,{borderRight:"1px dashed gray",pr:4,children:e.jsx(r,{fontWeight:"extrabold",textAlign:"right",children:"Porta de Origem"})}),e.jsx(s,{pl:2,children:e.jsx(r,{children:t.XForwardedSourcePort||"N/A"})}),e.jsx(s,{borderRight:"1px dashed gray",pr:4,children:e.jsx(r,{fontWeight:"extrabold",textAlign:"right",children:"Data"})}),e.jsx(s,{pl:2,children:e.jsx(r,{children:t.Timestamp.toDateString()})}),e.jsx(s,{borderRight:"1px dashed gray",pr:4,children:e.jsx(r,{fontWeight:"extrabold",textAlign:"right",children:"Hora"})}),e.jsx(s,{pl:2,children:e.jsx(r,{children:t.Timestamp.toTimeString()})}),e.jsx(s,{borderRight:"1px dashed gray",pr:4,children:e.jsx(r,{fontWeight:"extrabold",textAlign:"right",children:"Timestamp"})}),e.jsx(s,{pl:2,children:e.jsx(r,{children:t.Timestamp.toISOString()})})]})}):null]})};export{z as default};
