import{r as b,u as N,f as S,j as e,o as W,c as k,a as A,b as P,d as O,B as I,e as _,S as G,T as s,G as H}from"./index-CtE1KQDU.js";import{u as T,G as i}from"./useQuery-DAhalTyd.js";import{u as q,S as B}from"./useShare-C1K_nhpg.js";import{F as y,H as $,I as z}from"./createLucideIcon-BNJws9G5.js";import{R as M}from"./refresh-ccw-BDIq8fHF.js";function K(d){const{loading:t,src:a,srcSet:r,onLoad:n,onError:o,crossOrigin:l,sizes:f,ignoreFallback:m}=d,[h,g]=b.useState("pending");b.useEffect(()=>{g(a?"loading":"pending")},[a]);const x=b.useRef(),p=b.useCallback(()=>{if(!a)return;j();const c=new Image;c.src=a,l&&(c.crossOrigin=l),r&&(c.srcset=r),f&&(c.sizes=f),t&&(c.loading=t),c.onload=u=>{j(),g("loaded"),n==null||n(u)},c.onerror=u=>{j(),g("failed"),o==null||o(u)},x.current=c},[a,l,r,f,n,o,t]),j=()=>{x.current&&(x.current.onload=null,x.current.onerror=null,x.current=null)};return N(()=>{if(!m)return h==="loading"&&p(),()=>{j()}},[h,p,m]),m?"loaded":h}const Q=(d,t)=>d!=="loaded"&&t==="beforeLoadOrError"||d==="failed"&&t==="onError",w=S(function(t,a){const{htmlWidth:r,htmlHeight:n,alt:o,...l}=t;return e.jsx("img",{width:r,height:n,ref:a,alt:o,...l})});w.displayName="NativeImage";const R=S(function(t,a){const{fallbackSrc:r,fallback:n,src:o,srcSet:l,align:f,fit:m,loading:h,ignoreFallback:g,crossOrigin:x,fallbackStrategy:p="beforeLoadOrError",referrerPolicy:j,...c}=t,u=r!==void 0||n!==void 0,F=h!=null||g||!u,E=K({...t,crossOrigin:x,ignoreFallback:F}),L=Q(E,p),v={ref:a,objectFit:m,objectPosition:f,...F?c:W(c,["onError","onLoad"])};return L?n||e.jsx(k.img,{as:w,className:"chakra-image__placeholder",src:r,...v}):e.jsx(k.img,{as:w,src:o,srcSet:l,crossOrigin:x,loading:h,referrerPolicy:j,className:"chakra-image",...v})});R.displayName="Image";const C=S(function(t,a){const r=A("Link",t),{className:n,isExternal:o,...l}=P(t);return e.jsx(k.a,{target:o?"_blank":void 0,rel:o?"noopener":void 0,ref:a,className:O("chakra-link",n),...l,__css:r})});C.displayName="Link";const Y=()=>{const d=async()=>{const g=await fetch("https://ipinfo.io/json");if(!g.ok)throw new Error("Falha na resposta da rede");return g.json()},{ref:t,share:a}=q(),{data:r,isLoading:n,isError:o,error:l,refetch:f,isFetching:m}=T({queryKey:["ipInfo"],queryFn:d,refetchOnWindowFocus:!1,staleTime:1e3*60*5}),h=()=>{f()};return e.jsxs(I,{bg:_("white","gray.700"),borderRadius:"md",p:5,boxShadow:"md",position:"relative",_hover:{boxShadow:"xl",transform:"scale(1.02)"},transition:"0.3s",maxW:"full",minH:"400px",ref:t,children:[e.jsxs(y,{justifyContent:"space-between",alignItems:"center",mb:5,children:[e.jsx($,{size:"lg",children:"Informações IP"}),e.jsxs(I,{alignContent:"end",children:[e.jsx(z,{"aria-label":"Share",icon:e.jsx(B,{size:18}),onClick:a,size:"sm",variant:"ghost"}),e.jsx(z,{"aria-label":"Refresh",icon:e.jsx(M,{size:18}),onClick:h,size:"sm",variant:"ghost",isLoading:m})]})]}),n?e.jsx(y,{justifyContent:"center",alignItems:"center",height:"70%",children:e.jsx(G,{size:"xl"})}):o?e.jsxs(s,{children:["Erro ao obter as informações: ",l.message]}):r?e.jsx(I,{children:e.jsxs(H,{templateColumns:"auto 1fr",gap:3,children:[e.jsx(i,{borderRight:"1px dashed gray",pr:4,children:e.jsx(s,{fontWeight:"bold",textAlign:"right",children:"IP"})}),e.jsx(i,{pl:2,children:e.jsx(s,{children:r.ip})}),e.jsx(i,{borderRight:"1px dashed gray",pr:4,children:e.jsx(s,{fontWeight:"extrabold",textAlign:"right",children:"Hostname"})}),e.jsx(i,{pl:2,children:e.jsx(s,{children:r.hostname||"N/A"})}),e.jsx(i,{borderRight:"1px dashed gray",pr:4,children:e.jsx(s,{fontWeight:"extrabold",textAlign:"right",children:"Cidade"})}),e.jsx(i,{pl:2,children:e.jsx(s,{children:r.city})}),e.jsx(i,{borderRight:"1px dashed gray",pr:4,children:e.jsx(s,{fontWeight:"extrabold",textAlign:"right",children:"Região"})}),e.jsx(i,{pl:2,children:e.jsx(s,{children:r.region})}),e.jsx(i,{borderRight:"1px dashed gray",pr:4,children:e.jsx(s,{fontWeight:"extrabold",textAlign:"right",children:"País"})}),e.jsx(i,{pl:2,children:e.jsxs(y,{alignItems:"center",children:[e.jsx(s,{mr:1,children:r.country}),e.jsx(R,{width:"5",src:`https://flagcdn.com/32x24/${r.country.toLocaleLowerCase()}.png`,alt:r.country})]})}),e.jsx(i,{borderRight:"1px dashed gray",pr:4,children:e.jsx(s,{fontWeight:"extrabold",textAlign:"right",children:"Localização"})}),e.jsx(i,{pl:2,children:e.jsxs(y,{alignItems:"center",children:[e.jsx(s,{color:"blue.300",mr:1,children:r.loc}),e.jsx(C,{href:`https://www.google.com/maps/search/?api=1&query=${r.loc}`,isExternal:!0,children:e.jsx(R,{width:"5",src:"/img/maps.png",alt:"Google Maps"})})]})}),e.jsx(i,{borderRight:"1px dashed gray",pr:4,children:e.jsx(s,{fontWeight:"extrabold",textAlign:"right",children:"Organização"})}),e.jsx(i,{pl:2,children:e.jsx(s,{children:r.org})}),e.jsx(i,{borderRight:"1px dashed gray",pr:4,children:e.jsx(s,{fontWeight:"extrabold",textAlign:"right",children:"Timezone"})}),e.jsx(i,{pl:2,children:e.jsx(s,{children:r.timezone})}),e.jsx(i,{borderRight:"1px dashed gray",pr:4,children:e.jsx(s,{fontWeight:"extrabold",textAlign:"right",children:"Postal"})}),e.jsx(i,{pl:2,children:e.jsx(s,{children:r.postal||"N/A"})})]})}):null]})};export{Y as default};
